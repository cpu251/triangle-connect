(function(e){function t(t){for(var a,n,r=t[0],m=t[1],c=t[2],l=0,u=[];l<r.length;l++)n=r[l],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(a in m)Object.prototype.hasOwnProperty.call(m,a)&&(e[a]=m[a]);d&&d(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,n=1;n<i.length;n++){var r=i[n];0!==o[r]&&(a=!1)}a&&(s.splice(t--,1),e=m(m.s=i[0]))}return e}var a={},n={app:0},o={app:0},s=[];function r(e){return m.p+"js/"+({about:"about"}[e]||e)+"."+{about:"3af306bd"}[e]+".js"}function m(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,m),i.l=!0,i.exports}m.e=function(e){var t=[],i={about:1};n[e]?t.push(n[e]):0!==n[e]&&i[e]&&t.push(n[e]=new Promise((function(t,i){for(var a="css/"+({about:"about"}[e]||e)+"."+{about:"02ba8491"}[e]+".css",o=m.p+a,s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var c=s[r],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===a||l===o))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){c=u[r],l=c.getAttribute("data-href");if(l===a||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete n[e],d.parentNode.removeChild(d),i(s)},d.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){n[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,i){a=o[e]=[t,i]}));t.push(a[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,m.nc&&l.setAttribute("nonce",m.nc),l.src=r(e);var u=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(d);var i=o[e];if(0!==i){if(i){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",u.name="ChunkLoadError",u.type=a,u.request=n,i[1](u)}o[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},m.m=e,m.c=a,m.d=function(e,t,i){m.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},m.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.t=function(e,t){if(1&t&&(e=m(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(m.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)m.d(i,a,function(t){return e[t]}.bind(null,a));return i},m.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return m.d(t,"a",t),t},m.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},m.p="",m.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0c5c":function(e,t,i){e.exports=i.p+"media/count-down.8f8a8b98.wav"},"38fe":function(e,t,i){e.exports=i.p+"media/change.fe80428d.wav"},"3d86":function(e,t,i){},"3fda":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("7a23"),n=function(e){return Object(a["v"])("data-v-c27468de"),e=e(),Object(a["t"])(),e},o={class:"navbar navbar-expand navbar-dark bg-dark w-100 mb-3"},s={class:"container"},r={class:"navbar-brand"},m=n((function(){return Object(a["f"])("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(a["f"])("span",{class:"navbar-toggler-icon"})],-1)})),c={class:"collapse navbar-collapse",id:"navbarColor01"},l={class:"navbar-nav me-auto ms-1"},u={class:"nav-item"},d={class:"nav-item"},f=Object(a["g"])("游戏玩法"),h={key:0,class:"nav-item"},b={class:"modal game-settlement fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"gameModalDom"},g={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},v={class:"modal-content"},p=n((function(){return Object(a["f"])("div",{class:"modal-header"},[Object(a["f"])("h5",{class:"modal-title",id:"staticBackdropLabel"},"游戏结束")],-1)})),O={class:"modal-body"},j={class:"mb-2"},y={class:"modal-footer justify-content-center"};function I(e,t,i,n,I,x){var T=Object(a["z"])("router-link"),C=Object(a["z"])("router-view");return Object(a["s"])(),Object(a["e"])(a["a"],null,[Object(a["f"])("div",{class:"d-flex flex-column align-items-center vh-100",style:Object(a["o"])(x.styleObject())},[Object(a["f"])("nav",o,[Object(a["f"])("div",s,[Object(a["f"])("a",r,Object(a["B"])(I.document.title),1),m,Object(a["f"])("div",c,[Object(a["f"])("ul",l,[Object(a["f"])("li",u,[Object(a["h"])(T,{class:"nav-link",to:"/"},{default:Object(a["G"])((function(){return[Object(a["g"])(Object(a["B"])(x.mainName()),1)]})),_:1})]),Object(a["f"])("li",d,[Object(a["h"])(T,{class:"nav-link",to:"/about"},{default:Object(a["G"])((function(){return[f]})),_:1})]),I.gameReloadBtn?(Object(a["s"])(),Object(a["e"])("li",h,[Object(a["f"])("button",{type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=function(e){return x.gameReload()})},"重新开始")])):Object(a["d"])("",!0)])])])]),Object(a["f"])("div",{class:Object(a["n"])(["d-flex flex-column flex-fill w-100",{"router-change":I.routerChange}])},[Object(a["h"])(C)],2)],4),Object(a["f"])("div",b,[Object(a["f"])("div",g,[Object(a["f"])("div",v,[p,Object(a["f"])("div",O,[Object(a["f"])("div",null,"得分："+Object(a["B"])(n.game.score),1),Object(a["f"])("div",null,"最大Combo："+Object(a["B"])(n.game.maxCombo),1),Object(a["f"])("div",j,"用时："+Object(a["B"])(x.timeCost()),1),Object(a["f"])("div",null,"历史最大得分："+Object(a["B"])(I.gameHistory.maxScore),1),Object(a["f"])("div",null,"历史最大Combo："+Object(a["B"])(I.gameHistory.maxCombo),1)]),Object(a["f"])("div",y,[Object(a["f"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=function(e){return x.gameBack()})},"返回"),Object(a["f"])("button",{type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=function(e){return x.gameReload()})},"重新开始")])])])],512)],64)}i("e9c4"),i("b0c0"),i("ab8b");var x=i("0deb"),T=i.n(x),C=(i("cd74"),i("de40")),M=i.n(C),w={index:0,options:[{firstNumber:3,secondNumber:3,color:3,maxTime:3e4,addTime:2e4,itemAddTime:3e3},{firstNumber:5,secondNumber:3,color:3,maxTime:5e4,addTime:2e4,itemAddTime:2e3},{firstNumber:5,secondNumber:5,color:5,maxTime:65e3,addTime:15e3,itemAddTime:1e3},{firstNumber:7,secondNumber:5,color:5,maxTime:75e3,addTime:1e4,itemAddTime:500},{firstNumber:7,secondNumber:7,color:5,maxTime:8e4,addTime:5e3,itemAddTime:300},{firstNumber:9,secondNumber:7,color:7,maxTime:85e3,addTime:5e3,itemAddTime:200},{firstNumber:9,secondNumber:9,color:7,maxTime:9e4,addTime:5e3,itemAddTime:100}]},N={name:"App",data:function(){return{document:document,gameReloadBtn:!1,routerChange:!1,gameHistory:{maxScore:0,maxCombo:0}}},created:function(){var e=this,t=localStorage.getItem("gameHistory");t&&(this.gameHistory=JSON.parse(t),void 0!==this.gameHistory.sound&&(this.game.sound=this.gameHistory.sound)),this.$watch("game.gameOver",(function(){if(e.game.gameOver){var t=!1;e.gameHistory.maxScore<e.game.score&&(e.gameHistory.maxScore=Object(a["D"])(e.game.score),t=!0),e.gameHistory.maxCombo<e.game.maxCombo&&(e.gameHistory.maxCombo=Object(a["D"])(e.game.maxCombo),t=!0),t&&localStorage.setItem("gameHistory",JSON.stringify(e.gameHistory))}})),this.$watch("game.sound",(function(){e.gameHistory.sound=e.game.sound,localStorage.setItem("gameHistory",JSON.stringify(e.gameHistory))})),this.$watch("$router.currentRoute.value.name",(function(t){"Game"===t&&(e.routerChange=!0,setTimeout((function(){e.routerChange&&(e.routerChange=!1)}),300))}))},mounted:function(){this.gameModal=new T.a.Modal(this.$refs.gameModalDom,{})},setup:function(){var e=Object(a["x"])(w),t=Object(a["x"])(M.a.init(w.options[w.index])),i=Object(a["x"])(null),n=Object(a["x"])(!1);return Object(a["u"])("game",t),Object(a["u"])("gameOptions",e),Object(a["u"])("gameModal",i),Object(a["u"])("gameOverFilter",n),{game:t,gameOptions:e,gameModal:i,gameOverFilter:n}},methods:{gameReload:function(){this.game.reload=!0,this.gameReloadBtn=!1},gameBack:function(){this.gameModal.hide(),this.gameReloadBtn=!0},mainName:function(){return"Game"===this.$router.currentRoute.value.name?(this.game.gameOver&&(this.gameReloadBtn=!0),"开始游戏"):(this.gameReloadBtn=!1,"继续游戏")}},computed:{styleObject:function(){var e=this;return function(){return{overflow:"Game"===e.$router.currentRoute.value.name?"hidden":"",transition:"0.5s filter ease",filter:e.gameOverFilter&&!e.gameReloadBtn&&"Game"===e.$router.currentRoute.value.name?"blur(3px)":""}}},timeCost:function(){var e=this;return function(){var t=Math.floor(e.game.timeCost/1e3)%60,i=Math.floor((e.game.timeCost-1e3*t)/6e4)%60;return(i<10?"0":"")+i+" : "+(t<10?"0":"")+t}}}},S=(i("fb79"),i("dd39"),i("6b0d")),k=i.n(S);const $=k()(N,[["render",I],["__scopeId","data-v-c27468de"]]);var A=$,L=(i("d3b7"),i("3ca3"),i("ddb0"),i("6c02")),P=function(e){return Object(a["v"])("data-v-b0155696"),e=e(),Object(a["t"])(),e},R={class:"game-tips container position-relative mb-1"},B={class:"game-time d-flex align-items-center"},H={class:"position-relative ms-2",style:{"z-index":"1"}},F={class:"game-score-container d-flex align-items-center justify-content-end"},z={class:"game-combo"},E=P((function(){return Object(a["f"])("span",{class:"small"},"最大Combo",-1)})),D=Object(a["g"])(),_={style:{color:"#f52020","font-size":"1.2em"}},G={class:"game-score"},W=P((function(){return Object(a["f"])("span",{class:"small"},"得分",-1)})),J={class:"position-relative"},q={class:"game-combo-settlement d-flex align-items-center justify-content-center"},X={key:0},Y=P((function(){return Object(a["f"])("i",{class:"bi bi-volume-up"},null,-1)})),K=["src"],U=["src"],Q=["src"],V=["src"],Z={key:1},ee=P((function(){return Object(a["f"])("i",{class:"bi bi-volume-mute"},null,-1)})),te=[ee],ie={class:"game-container d-flex flex-fill w-100",style:{height:"0"}},ae={class:"game-line"};function ne(e,t,i,n,o,s){var r=Object(a["z"])("LineLayer"),m=Object(a["z"])("Point");return Object(a["s"])(),Object(a["e"])(a["a"],null,[Object(a["f"])("div",R,[Object(a["f"])("div",B,[Object(a["f"])("div",{class:"game-time-remaining",style:Object(a["o"])(s.timeStyleObject())},null,4),Object(a["f"])("div",H,Object(a["B"])(s.timeRemaining()),1)]),Object(a["f"])("div",F,[Object(a["f"])("div",z,[E,D,Object(a["f"])("span",_,Object(a["B"])(s.animatedCombo),1)]),Object(a["f"])("div",G,[W,Object(a["g"])(" "+Object(a["B"])(s.animatedScore),1)])]),Object(a["f"])("div",J,[Object(a["f"])("div",q,[Object(a["f"])("div",{class:Object(a["n"])(["game-current-combo",o.comboClass])},"Combo x"+Object(a["B"])(n.game.currentCombo),3),Object(a["f"])("div",{class:Object(a["n"])(["game-add-time",o.itemAddTimeClass])},"+"+Object(a["B"])(n.game.currentCombo*n.game.itemAddTime/1e3)+"s",3)]),Object(a["f"])("div",{class:Object(a["n"])(["game-over mt-3",o.gameOverClass])},"时间到",2),Object(a["f"])("div",{class:"game-sounds d-flex align-items-center justify-content-center",onClick:t[0]||(t[0]=function(e){return n.game.sound=!n.game.sound})},[n.game.sound?(Object(a["s"])(),Object(a["e"])("div",X,[Y,Object(a["f"])("audio",{class:"d-none",src:o.assetSoundChange,ref:"soundChange"},null,8,K),Object(a["f"])("audio",{class:"d-none",src:o.assetSoundGetItem,ref:"soundGetItem"},null,8,U),Object(a["f"])("audio",{class:"d-none",src:o.assetSoundCountDown,ref:"soundCountDown"},null,8,Q),Object(a["f"])("audio",{class:"d-none",src:o.assetSoundTimeOver,ref:"soundTimeOver"},null,8,V)])):(Object(a["s"])(),Object(a["e"])("div",Z,te))])])]),Object(a["f"])("div",ie,[Object(a["f"])("div",{class:Object(a["n"])(s.classObject()),ref:"container"},[Object(a["f"])("div",{class:"game-row",style:Object(a["o"])(o.rowStyleObject),ref:"gameRow"},[Object(a["f"])("div",ae,[Object(a["h"])(r,{items:n.game.items},null,8,["items"])]),Object(a["h"])(m,{items:n.game.items},null,8,["items"])],4)],2)])],64)}i("b680");var oe=i("2ef0"),se=i.n(oe),re=function(e){return Object(a["v"])("data-v-fdac078a"),e=e(),Object(a["t"])(),e},me=re((function(){return Object(a["f"])("div",{class:"slash"},null,-1)})),ce=[me];function le(e,t,i,n,o,s){return Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(i.items,(function(e,t){return Object(a["s"])(),Object(a["e"])(a["a"],{key:e},[t<i.items.length-1?(Object(a["s"])(),Object(a["e"])("div",{key:0,class:Object(a["n"])(s.firstClassObject()),style:Object(a["o"])(s.firstStyleObject(e))},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(e,(function(i,n){return Object(a["s"])(),Object(a["e"])(a["a"],{key:i},[n<e.length-1?(Object(a["s"])(),Object(a["e"])("div",{key:0,class:Object(a["n"])(s.secondClassObject(i,t,n))},ce,2)):Object(a["d"])("",!0)],64)})),128))],6)):Object(a["d"])("",!0)],64)})),128)}var ue=i("b85c"),de={name:"LineLayer",props:{items:Array},computed:{firstClassObject:function(){return function(){return{"first-layer":!0,"d-grid":!0,"gap-0":!0}}},firstStyleObject:function(){return function(e){return{"grid-template-columns":"repeat("+(e.length-1)+", 1fr)"}}},secondClassObject:function(){var e=this;return function(t,i,a){var n={"second-layer":!0},o=!0,s=!0,r=!0,m=!0,c=!0;if(i%2===0)if(s=!1,a%2===0){if(m=!1,a+1<e.items[i].length){var l,u=Object(ue["a"])(e.items[i][a+1]);try{for(u.s();!(l=u.n()).done;){var d=l.value;o&&(d.topItem||d.bottomItem)&&(o=!1),c&&d.bottomItem&&(c=!1)}}catch(q){u.e(q)}finally{u.f()}}if(i+1<e.items.length){var f,h=Object(ue["a"])(e.items[i+1][a]);try{for(h.s();!(f=h.n()).done;){var b=f.value;r&&(b.leftItem||b.rightItem)&&(r=!1),c&&b.rightItem&&(c=!1)}}catch(q){h.e(q)}finally{h.f()}}}else{if(r=!1,a>=0){var g,v=Object(ue["a"])(e.items[i][a]);try{for(v.s();!(g=v.n()).done;){var p=g.value;o&&(p.topItem||p.bottomItem)&&(o=!1),c&&p.bottomItem&&(c=!1)}}catch(q){v.e(q)}finally{v.f()}}if(i+1<e.items.length&&a+1<e.items[i].length){var O,j=Object(ue["a"])(e.items[i+1][a+1]);try{for(j.s();!(O=j.n()).done;){var y=O.value;c&&y.leftItem&&(c=!1)}}catch(q){j.e(q)}finally{j.f()}}if(a+2===e.items[i].length){var I,x=Object(ue["a"])(e.items[i+1][a+1]);try{for(x.s();!(I=x.n()).done;){var T=I.value;m&&T.leftItem&&(m=!1)}}catch(q){x.e(q)}finally{x.f()}}else m=!1}else if(o=!1,a%2===0){m=!1;var C,M=Object(ue["a"])(e.items[i][a]);try{for(M.s();!(C=M.n()).done;){var w=C.value;r&&(w.leftItem||w.rightItem)&&(r=!1),c&&w.rightItem&&(c=!1)}}catch(q){M.e(q)}finally{M.f()}if(i+1<e.items.length&&a+1<e.items[i].length){var N,S=Object(ue["a"])(e.items[i+1][a+1]);try{for(S.s();!(N=S.n()).done;){var k=N.value;c&&k.topItem&&(c=!1)}}catch(q){S.e(q)}finally{S.f()}}if(i+2===e.items.length&&a+1<e.items[i].length){var $,A=Object(ue["a"])(e.items[i+1][a+1]);try{for(A.s();!($=A.n()).done;){var L=$.value;s&&L.topItem&&(s=!1)}}catch(q){A.e(q)}finally{A.f()}}else s=!1}else{if(r=!1,i+1<e.items.length){var P,R=Object(ue["a"])(e.items[i+1][a]);try{for(R.s();!(P=R.n()).done;){var B=P.value;c&&B.topItem&&(c=!1)}}catch(q){R.e(q)}finally{R.f()}}if(a+1<e.items[i].length){var H,F=Object(ue["a"])(e.items[i][a+1]);try{for(F.s();!(H=F.n()).done;){var z=H.value;c&&z.leftItem&&(c=!1)}}catch(q){F.e(q)}finally{F.f()}}if(i+2===e.items.length){var E,D=Object(ue["a"])(e.items[i+1][a]);try{for(D.s();!(E=D.n()).done;){var _=E.value;s&&_.topItem&&(s=!1)}}catch(q){D.e(q)}finally{D.f()}}else s=!1;if(a+2===e.items[i].length){var G,W=Object(ue["a"])(e.items[i][a+1]);try{for(W.s();!(G=W.n()).done;){var J=G.value;m&&J.leftItem&&(m=!1)}}catch(q){W.e(q)}finally{W.f()}}else m=!1}return n["top-none"]=o,n["bottom-none"]=s,n["left-none"]=r,n["right-none"]=m,n["slash-none"]=c,n}}}};i("e946");const fe=k()(de,[["render",le],["__scopeId","data-v-fdac078a"]]);var he=fe,be=i("ade3"),ge=function(e){return Object(a["v"])("data-v-b4853356"),e=e(),Object(a["t"])(),e},ve=ge((function(){return Object(a["f"])("div",{class:"kernel"},null,-1)})),pe=[ve];function Oe(e,t,i,n,o,s){return Object(a["s"])(),Object(a["e"])("div",{class:"game-point",ref:"gamePoint",style:Object(a["o"])(s.styleGamePoint())},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(i.items,(function(e,t){return Object(a["s"])(),Object(a["e"])(a["a"],{key:e},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(e,(function(e,i){return Object(a["s"])(),Object(a["e"])(a["a"],{key:e},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(e,(function(e,n){return Object(a["s"])(),Object(a["e"])("div",Object(be["a"])({key:e,class:Object(a["n"])(s.classObject(e)),style:Object(a["o"])(s.styleObject(e,t,i))},Object(a["C"])(o.triggerEvent),Object(a["H"])((function(e){return s.moveStart(t,i,n,e)}),["stop","prevent"])),pe,16)})),128))],64)})),128))],64)})),128))],4)}i("159b"),i("a434");var je=i("cffa"),ye={name:"Point",data:function(){return{moveFlag:!0,settlementFlag:!1,x:0,y:0,actionItem:null,time:0,timeOver:!1,soundCountDownTime:0,isPC:!("ontouchend"in document),triggerEvent:"ontouchend"in document?"touchstart":"mousedown"}},props:{items:Array},setup:function(){var e=Object(a["l"])("game"),t=Object(a["l"])("gameSound");return{game:e,gameSound:t}},methods:{moveTime:function(){if(!this.game.clear&&this.game.time>0){var e=(new Date).getTime();if(this.game.time-=e-this.time,this.game.time=this.game.time<0?0:this.game.time,this.game.displayTime=this.game.time,this.game.timeCost+=e-this.time,this.time=e,this.game.time<=0)return this.game.sound&&this.gameSound.soundTimeOver.play(),this.timeOver=!0,void this.moveEnd();this.timeOver&&(this.timeOver=!1),this.game.sound&&this.game.time<5e3?this.soundCountDownTime>this.game.time&&(this.soundCountDownTime=1e3*Math.floor(this.game.time/1e3),this.gameSound.soundCountDown.play()):this.soundCountDownTime=5e3,requestAnimationFrame(this.moveTime)}},moveStart:function(e,t,i,a){!this.settlementFlag&&this.moveFlag&&this.game.time>0&&"ball"===this.game.items[e][t][i].type&&(this.moveFlag=!1,"targetTouches"in a?(this.x=a.targetTouches[0].screenX,this.y=a.targetTouches[0].screenY):(this.x=a.screenX,this.y=a.screenY),this.actionItem=this.game.items[e][t][i],this.actionItem.zIndex=3,this.time=(new Date).getTime(),requestAnimationFrame(this.moveTime))},moveEnd:function(){var e=this;if(this.timeOver||!this.settlementFlag&&!this.moveFlag){this.moveFlag=!0,this.actionItem.zIndex=2,this.actionItem.marginTop=0,this.actionItem.marginLeft=0,je["a"].to(this.actionItem,{duration:.1,styleMarginLeft:0}),je["a"].to(this.actionItem,{duration:.1,styleMarginTop:0}),this.settlementFlag=!0;var t=Object(a["F"])((function(){var t=[];e.game.items.forEach((function(e,i){e.forEach((function(e,a){"ball"!==e[0].type||e[0].firstIndex===i&&e[0].secondIndex===a||t.push({item:e,firstIndex:i,secondIndex:a})}))}));for(var i=0,a=t;i<a.length;i++){var n=a[i];e.game.items[n.item[0].firstIndex].splice(n.item[0].secondIndex,1,n.item)}e.game.itemSettlement(),je["a"].to(e.game,{duration:.5,displayTime:e.game.time}),e.settlementFlag=!1,e.game.sound&&e.game.currentCombo>0&&e.gameSound.soundGetItem.play()}));t()}},move:function(e){if(!this.settlementFlag&&!this.moveFlag){var t=0,i=0;"targetTouches"in e?(t=e.targetTouches[0].screenX-this.x,i=e.targetTouches[0].screenY-this.y):(t=e.screenX-this.x,i=e.screenY-this.y);var a=this.$refs.gamePoint.offsetWidth/(this.game.items[0].length-1),n=this.$refs.gamePoint.offsetHeight/(this.game.items.length-1);if(Math.abs(t)*Math.abs(t)+Math.abs(i)*Math.abs(i)<=n*a*.25?this.actionItem.firstIndex%2===0?Math.abs(Math.abs(t)-Math.abs(i))<.2*a?i=t*i>=0?t:-t:Math.abs(t)>Math.abs(i)?i=0:Math.abs(t)<Math.abs(i)&&(t=0):Math.abs(t)>Math.abs(i)?i=t*i>0?t:-t:Math.abs(t)<Math.abs(i)&&(t=t*i>0?i:-i):this.actionItem.firstIndex%2===0?Math.abs(t)<.3*a||Math.abs(i)<.3*n?Math.abs(t)>=Math.abs(i)?(i=0,Math.abs(t)>2*a&&(t=t>=0?2*a:2*-a)):(t=0,Math.abs(i)>2*n&&(i=i>=0?2*n:2*-n)):Math.abs(this.actionItem.marginLeft)===Math.abs(this.actionItem.marginTop)?Math.abs(t)>Math.abs(i)?t=t*i>0?i:-i:Math.abs(t)<Math.abs(i)&&(i=t*i>0?t:-t):0===this.actionItem.marginLeft?t=0:0===this.actionItem.marginTop&&(i=0):Math.abs(t)>Math.abs(i)?t=t*i>0?i:-i:Math.abs(t)<Math.abs(i)&&(i=t*i>0?t:-t),t>this.$refs.gamePoint.offsetWidth-this.actionItem.left*this.$refs.gamePoint.offsetWidth/100?t=this.$refs.gamePoint.offsetWidth-this.actionItem.left*this.$refs.gamePoint.offsetWidth/100:t<-this.actionItem.left*this.$refs.gamePoint.offsetWidth/100&&(t=-this.actionItem.left*this.$refs.gamePoint.offsetWidth/100),i>this.$refs.gamePoint.offsetHeight-this.actionItem.top*this.$refs.gamePoint.offsetHeight/100?i=this.$refs.gamePoint.offsetHeight-this.actionItem.top*this.$refs.gamePoint.offsetHeight/100:i<-this.actionItem.top*this.$refs.gamePoint.offsetHeight/100&&(i=-this.actionItem.top*this.$refs.gamePoint.offsetHeight/100),this.actionItem.marginLeft=t,this.actionItem.marginTop=i,je["a"].to(this.actionItem,{duration:.1,styleMarginLeft:t}),je["a"].to(this.actionItem,{duration:.1,styleMarginTop:i}),Math.abs(t)>.2*a&&(Math.abs(t%a)<.2*a||a-Math.abs(t%a)<.2*a)||Math.abs(i)>.2*n&&(Math.abs(i%n)<.2*n||n-Math.abs(i%n)<.2*n)){var o=Math.round((this.actionItem.top*this.$refs.gamePoint.offsetHeight*.01+i)/n),s=Math.round((this.actionItem.left*this.$refs.gamePoint.offsetWidth*.01+t)/a);if("ball"===this.game.items[o][s][0].type){var r,m;this.x=this.x-(this.actionItem.secondIndex-s)*a,this.y=this.y-(this.actionItem.firstIndex-o)*n,this.actionItem.marginLeft=0,this.actionItem.marginTop=0,this.actionItem.styleMarginLeft=0,this.actionItem.styleMarginTop=0,je["a"].to(this.actionItem,{duration:.1,styleMarginLeft:0}),je["a"].to(this.actionItem,{duration:.1,styleMarginTop:0});e:for(var c in this.game.items)for(var l in this.game.items[c])if("ball"===this.game.items[c][l][0].type&&this.game.items[c][l][0].firstIndex===o&&this.game.items[c][l][0].secondIndex===s){r=c,m=l;break e}var u=this.game.items[r][m],d=u[0].top,f=u[0].left;je["a"].to(u[0],{duration:.3,styleTop:this.actionItem.top}),je["a"].to(u[0],{duration:.3,styleLeft:this.actionItem.left}),u[0].top=this.actionItem.top,u[0].left=this.actionItem.left,u[0].firstIndex=this.actionItem.firstIndex,u[0].secondIndex=this.actionItem.secondIndex,this.actionItem.top=d,this.actionItem.left=f,je["a"].to(this.actionItem,{duration:.1,styleTop:d}),je["a"].to(this.actionItem,{duration:.1,styleLeft:f}),this.actionItem.firstIndex=o,this.actionItem.secondIndex=s,this.game.sound&&this.gameSound.soundChange.play()}}}}},mounted:function(){this.$nextTick((function(){this.isPC?(document.addEventListener("mouseup",this.moveEnd),document.addEventListener("mousemove",this.move)):(document.addEventListener("touchend",this.moveEnd),document.addEventListener("touchmove",this.move))}))},computed:{classObject:function(){return function(e){var t={point:!0};return t[e.type]=!0,"ball"===e.type?(t["color"+e.color]=!0,t["active"]=3===e.zIndex):"item"===e.type&&(!1!==e.display?(t["disappear"]=!(e.leftItem||e.rightItem||e.topItem||e.bottomItem),t["disappear"]&&!e.setDisplay&&(e.setDisplay=!0,setTimeout((function(){e.display=!1}),1e3))):t["d-none"]=!0),t}},styleObject:function(){var e=this;return function(t,i,a){var n=1,o=0,s=0,r=0,m=0;if(void 0!==t.top&&void 0!==t.left)n=t.zIndex,o=t.styleTop,s=t.styleLeft,r=t.styleMarginTop,m=t.styleMarginLeft;else{var c=100/(e.items[i].length-1),l=100/(e.items.length-1);"item"===t.type?(n=1,t.topItem||t.bottomItem?(s=a*c,o=t.topItem?i*l-.4*l:i*l+.4*l):(t.leftItem||t.rightItem)&&(o=i*l,s=t.leftItem?a*c-.4*c:a*c+.4*c)):(n=2,o=i*l,s=a*c),t.zIndex=n,t.top=o,t.left=s,t.styleTop=o,t.styleLeft=s,t.marginTop=r,t.marginLeft=m,t.styleMarginTop=r,t.styleMarginLeft=m,t.firstIndex=i,t.secondIndex=a}return{top:o+"%",left:s+"%","z-index":n,"margin-top":r?r+"px":"","margin-left":m?m+"px":""}}},styleGamePoint:function(){var e=this;return function(){return{"--game-point-margin-top":100*(e.game.items.length-1)/(e.game.items[0].length-1)+"%"}}}}};i("ec32");const Ie=k()(ye,[["render",Oe],["__scopeId","data-v-b4853356"]]);var xe=Ie,Te=i("38fe"),Ce=i.n(Te),Me=i("c4a7"),we=i.n(Me),Ne=i("0c5c"),Se=i.n(Ne),ke=i("b215"),$e=i.n(ke),Ae={name:"Game",components:{LineLayer:he,Point:xe},data:function(){return{rowStyleObject:{width:"","--game-point-size":"8vw","--game-border-width":"3px"},comboClass:{animated:!1},itemAddTimeClass:{animated:!1},gameOverClass:{animated:!1},gameClear:!1,gameReload:!1,gameBack:!1,option:null,assetSoundChange:Ce.a,assetSoundGetItem:we.a,assetSoundCountDown:Se.a,assetSoundTimeOver:$e.a}},methods:{gameResize:function(){var e=this;if(this.$refs.container){var t,i=this.$refs.container.offsetHeight*(this.game.items[0].length-1)/(this.game.items.length-1);this.rowStyleObject["max-width"]=i+"px",t=this.game.items[0].length<5?i/(3*(this.game.items[0].length-1)):this.game.items[0].length<7?i/(2*(this.game.items[0].length-1)):i/(1.7*(this.game.items[0].length-1)),t>90&&(t=90),this.rowStyleObject["--game-point-size"]=t+"px",setTimeout((function(){var t;t=e.game.items[0].length<5?e.$refs.gameRow.offsetWidth/(3*(e.game.items[0].length-1)):e.game.items[0].length<7?e.$refs.gameRow.offsetWidth/(2*(e.game.items[0].length-1)):e.$refs.gameRow.offsetWidth/(1.7*(e.game.items[0].length-1)),t>90&&(t=90),e.rowStyleObject["--game-point-size"]=t+"px",e.$refs.gameRow.offsetWidth>600?e.rowStyleObject["--game-border-width"]="5px":e.$refs.gameRow.offsetWidth>400?e.rowStyleObject["--game-border-width"]="4px":e.rowStyleObject["--game-border-width"]="3px"}),1)}else setTimeout(this.gameResize,50)}},created:function(){var e=this;this.$watch("game.score",(function(t){je["a"].to(e.game,{duration:.5,displayScore:t})})),this.$watch("game.maxCombo",(function(t){je["a"].to(e.game,{duration:.5,displayMaxCombo:t})})),this.$watch("game.currentCombo",(function(){e.game.currentCombo>1?(e.comboClass.animated=!0,e.itemAddTimeClass.animated=!0,setTimeout((function(){e.comboClass.animated=!1,e.itemAddTimeClass.animated=!1}),1e3)):e.game.currentCombo>0&&(e.itemAddTimeClass.animated=!0,setTimeout((function(){e.itemAddTimeClass.animated=!1}),1e3))})),this.$watch("game.clear",(function(){e.game.clear&&(null===e.option&&(e.option=e.gameOptions.options[e.gameOptions.index]),e.gameOptions.index<e.gameOptions.options.length-1?e.option=e.gameOptions.options[++e.gameOptions.index]:e.option.firstNumber>e.option.secondNumber?e.option.secondNumber=e.option.firstNumber:e.option.firstNumber+=2,e.gameClear=!0,setTimeout((function(){e.game.init(e.option),je["a"].to(e.game,{duration:.5,displayTime:e.game.time}),je["a"].to(e.game,{duration:.5,displayMaxTime:e.game.maxTime}),setTimeout(e.gameResize,50),setTimeout((function(){e.gameClear=!1}),500)}),500))})),this.$watch("game.gameOver",(function(){e.game.gameOver&&(setTimeout((function(){e.gameOverFilter=!0,e.gameModal.show()}),1e3),e.gameOverClass.animated=!0,setTimeout((function(){e.gameOverClass.animated=!1}),2e3))})),this.$watch("game.reload",(function(){e.game.reload&&(e.gameModal.hide(),e.gameOptions.index=0,e.gameOverFilter=!1,e.gameReload=!0,setTimeout((function(){e.game.init(e.gameOptions.options[e.gameOptions.index]),setTimeout(e.gameResize,50),setTimeout((function(){e.gameReload=!1}),300)}),200))}))},mounted:function(){this.gameSound={soundChange:this.$refs.soundChange,soundGetItem:this.$refs.soundGetItem,soundCountDown:this.$refs.soundCountDown,soundTimeOver:this.$refs.soundTimeOver},this.$nextTick((function(){this.gameResize(),window.addEventListener("resize",se.a.debounce(this.gameResize,500))}))},setup:function(){var e=Object(a["l"])("game"),t=Object(a["l"])("gameOptions"),i=Object(a["l"])("gameModal"),n=Object(a["l"])("gameOverFilter"),o=Object(a["x"])(null);return Object(a["u"])("gameSound",o),{game:e,gameOptions:t,gameModal:i,gameOverFilter:n,gameSound:o}},computed:{animatedScore:function(){return this.game.displayScore.toFixed(0)},animatedCombo:function(){return this.game.displayMaxCombo.toFixed(0)},classObject:function(){var e=this;return function(){return{"d-flex":!0,"justify-content-center":!0,"w-100":!0,"game-clear":e.gameClear,"game-reload":e.gameReload,"game-back":e.gameBack}}},timeStyleObject:function(){var e=this;return function(){var t={};return t.width=100*e.game.displayTime/e.game.displayMaxTime+"%",t}},timeRemaining:function(){var e=this;return function(){var t=Math.round(e.game.displayTime/1e3)%60,i=Math.round((e.game.displayTime-1e3*t)/6e4)%60;return(i<10?"0":"")+i+" : "+(t<10?"0":"")+t}}}};i("f510"),i("79e4");const Le=k()(Ae,[["render",ne],["__scopeId","data-v-b0155696"]]);var Pe=Le,Re=[{path:"/",name:"Game",component:Pe,meta:{keepAlive:!0,isBack:!1}},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}],Be=Object(L["a"])({history:"file://"===location.origin?Object(L["b"])():Object(L["c"])(location.pathname),linkActiveClass:"active",routes:Re}),He=Be;Object(a["c"])(A).use(He).mount("#app")},"695c":function(e,t,i){},"79e4":function(e,t,i){"use strict";i("695c")},b215:function(e,t,i){e.exports=i.p+"media/time-over.ff649d9a.mp3"},c4a7:function(e,t,i){e.exports=i.p+"media/get-item.3242c551.mp3"},d3ce:function(e,t,i){},d943:function(e,t,i){},dd39:function(e,t,i){"use strict";i("3fda")},dd82:function(e,t,i){},de40:function(e,t,i){var a=i("6374").default,n=i("7037").default;i("a9e3");var o=function(){var e={firstNumber:3,secondNumber:3,color:3,maxTime:3e4,addTime:3e4,itemAddTime:1e3},t=function(t){Object.assign(e,t),e.firstNumber=parseInt(e.firstNumber),(isNaN(e.firstNumber)||e.firstNumber<3)&&(e.firstNumber=3),e.secondNumber=parseInt(e.secondNumber),(isNaN(e.secondNumber)||e.secondNumber<3)&&(e.secondNumber=3),e.color=parseInt(e.color),isNaN(e.color)||e.color<3?e.color=3:e.color>7&&(e.color=7),e.maxTime=parseInt(e.maxTime),isNaN(e.maxTime)&&(e.maxTime=3e4),e.addTime=parseInt(e.addTime),isNaN(e.addTime)&&(e.addTime=3e4),e.itemAddTime=parseInt(e.itemAddTime),isNaN(e.itemAddTime)&&(e.itemAddTime=3e3)},i=function(e,t,i){var a=!1;return e===t&&e===i&&e>0&&(a=!0),a};return{firstNumber:3,secondNumber:3,items:null,score:0,currentCombo:0,maxCombo:0,maxTime:0,time:0,itemAddTime:0,timeCost:0,displayScore:0,displayMaxCombo:0,displayTime:0,displayMaxTime:0,gameOver:!1,clear:!1,reload:!1,routerOther:!0,sound:!0,init:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(a),this.maxTime=e.maxTime,0!==this.time||this.clear?this.time=this.time+e.addTime>this.maxTime?this.maxTime:this.time+e.addTime:(this.time=this.maxTime,this.displayTime=this.maxTime,this.displayMaxTime=this.maxTime,this.timeCost=0,this.itemAddTime=e.itemAddTime,this.score=0,this.displayScore=0,this.currentCombo=0,this.maxCombo=0,this.displayMaxCombo=0),this.firstNumber=e.firstNumber,this.secondNumber=e.secondNumber,this.gameOver=!1,this.clear=!1,this.reload=!1;for(var o=[],s=0,r=0;r<e.firstNumber;r++){o.push([]);for(var m=0;m<e.secondNumber;m++){var c=[];(r%2+m%2)%2===0?(c.push({type:"ball",color:0}),s++):0===r?c.push({type:"item",bottomItem:!0}):r===e.firstNumber-1?c.push({type:"item",topItem:!0}):r%2===0?(m>0&&c.push({type:"item",topItem:!0}),m<e.secondNumber-1&&c.push({type:"item",bottomItem:!0})):(m>0&&c.push({type:"item",leftItem:!0}),m<e.secondNumber-1&&c.push({type:"item",rightItem:!0})),o[r].push(c)}}var l=function(){for(var e in o)for(var t in o[e])"ball"===o[e][t][0].type&&(o[e][t][0].color=0)},u=function(){var e=!0;e:for(var t in o)for(var a in o[t]){if(t=Number(t),a=Number(a),!(e&&t<o.length-1))break e;(t%2+a%2)%2===0&&(t%2===0?(e&&a>0&&(e=!i(o[t][a][0].color,o[t+1][a-1][0].color,o[t+2][a][0].color)),e&&a+1<o[t].length&&(e=!i(o[t][a][0].color,o[t+1][a+1][0].color,o[t+2][a][0].color)),e&&a+2<o[t].length&&(e=!i(o[t][a][0].color,o[t+1][a+1][0].color,o[t][a+2][0].color))):e=!i(o[t][a][0].color,o[t+1][a-1][0].color,o[t+1][a+1][0].color))}return e},d=function t(){l();var i=0;e:for(var a=0;a<e.color;a++)for(var r=0;r<3;r++){if(!(i<s))break e;var m=Math.floor(Math.random()*e.firstNumber),c=Math.floor(Math.random()*e.secondNumber);while("ball"!==o[m][c][0].type||o[m][c][0].color>0)m=Math.floor(Math.random()*e.firstNumber),c=Math.floor(Math.random()*e.secondNumber);o[m][c][0].color=a+1,i++}var d=u();if(d){var f=0,h=function(i){var a=function(a){if("ball"===o[i][a][0].type&&0===o[i][a][0].color){var n=function t(){o[i][a][0].color=Math.floor(Math.random()*e.color)+1;var n=u();if(!n){if(f>=20)return!1;f++,t()}return!0};if(!n())return t(),{v:{v:void 0}}}};for(var s in o[i]){var r=a(s);if("object"===n(r))return r.v}};for(var b in o){var g=h(b);if("object"===n(g))return g.v}}else t()};return d(),this.items=o,this},itemSettlement:function(){var t=0;for(var n in this.items)for(var o in this.items[n])if(n=Number(n),o=Number(o),n<this.items.length-1&&(n%2+o%2)%2===0)if(n%2===0){if(o>0&&i(this.items[n][o][0].color,this.items[n+1][o-1][0].color,this.items[n+2][o][0].color))for(var s in this.items[n+1][o])!0===this.items[n+1][o][s].leftItem&&(this.items[n+1][o][s].leftItem=!1,t++);if(o+1<this.items[n].length&&i(this.items[n][o][0].color,this.items[n+1][o+1][0].color,this.items[n+2][o][0].color))for(var r in this.items[n+1][o])!0===this.items[n+1][o][r].rightItem&&(this.items[n+1][o][r].rightItem=!1,t++);if(o+2<this.items[n].length&&i(this.items[n][o][0].color,this.items[n+1][o+1][0].color,this.items[n][o+2][0].color))for(var m in this.items[n][o+1])!0===this.items[n][o+1][m].bottomItem&&(this.items[n][o+1][m].bottomItem=!1,t++)}else if(i(this.items[n][o][0].color,this.items[n+1][o-1][0].color,this.items[n+1][o+1][0].color))for(var c in this.items[n+1][o])!0===this.items[n+1][o][c].topItem&&(this.items[n+1][o][c].topItem=!1,t++);if(this.currentCombo=t,t>0){this.itemAddTime=e.itemAddTime;var l=100*(t+.5*(t-1));this.score+=l,this.maxCombo=t>this.maxCombo?t:this.maxCombo,this.time=this.time+this.itemAddTime*t>this.maxTime?this.maxTime:this.time+this.itemAddTime*t}var u,d=0,f=a(this.items);try{for(f.s();!(u=f.n()).done;){var h,b=u.value,g=a(b);try{for(g.s();!(h=g.n()).done;){var v,p=h.value,O=a(p);try{for(O.s();!(v=O.n()).done;){var j=v.value;"item"===j.type&&(j.topItem||j.bottomItem||j.leftItem||j.rightItem)&&d++}}catch(y){O.e(y)}finally{O.f()}}}catch(y){g.e(y)}finally{g.f()}}}catch(y){f.e(y)}finally{f.f()}0===d?this.clear=!0:this.time<=0&&(this.gameOver=!0)}}}();e.exports=o},e946:function(e,t,i){"use strict";i("d3ce")},ec32:function(e,t,i){"use strict";i("dd82")},f510:function(e,t,i){"use strict";i("3d86")},fb79:function(e,t,i){"use strict";i("d943")}});
//# sourceMappingURL=app.f92f270e.js.map